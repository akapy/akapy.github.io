<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">

 <link rel=stylesheet href="diary.css" media=all>

<link rel="alternate" type="application/rss+xml" title="RSS"
 href="rcl.rdf">
<title>kuttuki-rss.rbみたいなもの</title>
</head>
<body>

<a href="2008-03-22-2.html">Prev</a>


 / <a href="2008-03-22-6.html">Next</a>

/ <a href="index.html">あかぴのChangeLog by rchalow</a>
<h1>kuttuki-rss.rbみたいなもの[chalow][修行]<br><TMPL_VAR name=cat></h1>
<div class="day">
<a href="2008-03-22.html">2008-03-22</a>
<div class="body">
<!-- start:2008-03-22-3 -->
<div class="section">
<h3 class="subtitle"><a name="2008-03-22-3" href="2008-03-22-3.html"><span class="sanchor">＊</span></a> <span class="clitemheader">kuttuki-rss.rbみたいなもの</span> [<a href="cat_chalow.html">chalow</a>][<a href="cat_e4bfaee8a18c.html">修行</a>]</h3>
<p>なんか <a href="http://nais.to/~yto/tools/kuttuki-rss/">kuttuki-rss.pl</a> が動いてくれないので、<br>
<a href="http://www.cozmixng.org/~rwiki/?cmd=view;name=RSS+Parser">RSS Parser</a>のsampleを切り貼り。オイにはこの程度で充分だ。<br>
ありがとうございました＞kouさま<br>
<blockquote>#!/usr/bin/env ruby<br>
</p><p>
$LOAD_PATH.unshift("/home/akapy/lib/ruby/rss/lib")<br>
require 'rss'<br>
require 'open-uri'<br>
</p><p>
require "nkf"<br>
class String<br>
&nbsp;&nbsp;# From tdiary.rb<br>
&nbsp;&nbsp;def shorten( len = 120 )<br>
&nbsp;&nbsp;&nbsp;&nbsp;lines = NKF::nkf( "-e -m0 -f#{len}", self.gsub( /\n/, ' ' ) ).split( /\n/ )<br>
&nbsp;&nbsp;&nbsp;&nbsp;lines[0].concat( '...' ) if lines[0] and lines[1]<br>
&nbsp;&nbsp;&nbsp;&nbsp;lines[0]<br>
&nbsp;&nbsp;end<br>
end<br>
</p><p>
def print_items(feed)<br>
&nbsp;&nbsp;puts "document.writeln('&lt;h3>つっこみ一覧&lt;/h3>&lt;div class=\"stdbox\">&lt;p>recent entries&lt;/p>&lt;ul class=\"stdbox\">')"<br>
&nbsp;&nbsp;feed.items.each do |item|<br>
#    puts "document.writeln('&lt;li class=\"RSSitems\"> #{item.title.shorten(50)} : #{item.description.shorten(50)}&lt;/li>')"<br>
&nbsp;&nbsp;&nbsp;&nbsp;puts "document.writeln('&lt;li class=\"stdbox\"> #{item.description.shorten(20)}&lt;/li>')"<br>
&nbsp;&nbsp;end<br>
&nbsp;&nbsp;puts "document.writeln('&lt;/ul>&lt;/div>')"<br>
end<br>
</p><p>
#ARGV.each do |fname|<br>
#  feed = nil<br>
#  begin<br>
#    feed = RSS::Parser.parse(File.read(fname), false)<br>
&nbsp;&nbsp;&nbsp;&nbsp;rss = RSS::Parser.parse(open("http://pub.cozmixng.org/~akapy/ChangeLogMemo/kblog/bbs.rdf").read, false)<br>
&nbsp;&nbsp;&nbsp;&nbsp;rss.output_encoding = "euc-jp"<br>
</p><p>
#  rescue RSS::Error<br>
#  end<br>
</p><p>
&nbsp;&nbsp;if rss.nil?<br>
&nbsp;&nbsp;&nbsp;&nbsp;puts "#{fname}はRSS 0.9x/1.0/2.0, Atom 1.0のいずれでもありません。"<br>
&nbsp;&nbsp;else<br>
&nbsp;&nbsp;&nbsp;&nbsp;print_items(rss)<br>
&nbsp;&nbsp;end<br>
#end<br>
</blockquote><br>

</p>

<div class="comment">
<div class="caption">［
<a href="2008-03-22-3.html">固定リンク</a> ｜
<a href="2008-03-22-3.html#disqus_thread">Comments (View)</a>
］</div>

</div>

<!--200803223-->
</div>
<!-- end:2008-03-22-3 -->
<!-- 広告とか -->



<div id="disqus_thread"></div><script type="text/javascript" src="http://disqus.com/forums/akapy/embed.js"></script><noscript><a href="http://akapy.disqus.com/?url=ref">View the discussion thread.</a></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

</div></div>
<!--<p>last update: 2012-07-04 06:43</p>-->

</div>

<!-- Disqus -->
<script type="text/javascript">
//<![CDATA[
(function() {
		var links = document.getElementsByTagName('a');
		var query = '?';
		for(var i = 0; i < links.length; i++) {
			if(links[i].href.indexOf('#disqus_thread') >= 0) {
				query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
			}
		}
		document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/akapy/get_num_replies.js' + query + '"></' + 'script>');
	})();
//]]>
</script>
<!-- /Disqus -->
</body></html>
