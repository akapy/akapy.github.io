<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">

<link rel=stylesheet href="diary.css" media=all>

<link rel="alternate" type="application/rss+xml" title="RSS"
 href="rcl.rdf">
<title>chalow / あかぴのChangeLog by rchalow</title>
</head>
<body>
<div class="main">
<a href="index.html">ChangeLog 最新ページ</a>

 / <a href="cat_chalow.html">カテゴリ最新ページ</a> / 

1 <a href="cat_chalow-2.html">2</a>

<a href="cat_chalow-2.html">次ページ</a>

/ page 1 (2)

<h1>chalow - <a href="index.html">あかぴのChangeLog by rchalow</a></h1>
<div class="body">

<!-- start:2009-02-12-2 -->
<div class="section hentry">
  <div class="entry-title">
    <h3 class="subtitle"><a id="2009-02-12-2" href="2009-02-12-2.html"><span class="sanchor">■</span></a> <span class="clitemheader">rchalow-0.0.2が公開されたのでテスト</span> [<a href="cat_rchalow.html">rchalow</a>][<a href="cat_chalow.html">chalow</a>][<a href="cat_chalow-rb.html">chalow-rb</a>]
      <a href="https://b.hatena.ne.jp/entry/https://akapy.github.io/rchalow/2009-02-12-2.html">
        <img src="https://b.hatena.ne.jp/entry/image/https://akapy.github.io/rchalow/2009-02-12-2.html" class="no_border" alt="はてぶ">
      </a>
      <span class="hatesta"><a href="2009-02-12-2.html"></a></span>
    </h3>
  </div>
  
  <div class="entry-tag">tag: [<a href="cat_rchalow.html">rchalow</a>][<a href="cat_chalow.html">chalow</a>][<a href="cat_chalow-rb.html">chalow-rb</a>]</div>
  
  <div class="entry-content">
    <p><p>「rchalow - chalow の Ruby 実装」：<a href="http://www.ftnk.jp/~fumi/cl/2009-02-12-1.html">http://www.ftnk.jp/~fumi/cl/2009-02-12-1.html</a><br>
</p><p>
<hr>youtubeプラグイン<br>
<object width="425" height="350">
<param name="movie" value="$url"></param>
<embed src="http://www.youtube.com/v/c2o-HtDwTIk" type="application/x-shockwave-flash" 
width="425" height="350"></embed></object>

<br>
amazon_imgプラグイン<br>
<a href="http://www.amazon.co.jp/exec/obidos/ASIN/4894513277/ftnk1221-22/ref=nosim"><img src="http://images-jp.amazon.com/images/P/4894513277.09.MZZZZZZZ.jpg" alt=""></a><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4894513277/ftnk1221-22/ref=nosim"></a><br>
</p><p>
<hr>＜inside ref＞<br>
item への ref <a href="2005-11-08-2.html">[2005-11-08-2]</a><br>
<a href="2005-11-08.html">[2005-11-08]</a><br>
</p><p>
<hr>＜readmore＞<br>
foo bar<br>
<div class="readmore"><p>
<hr>＜Hiki 記法のテスト table＞<br>
<table><tr><td>a<td>b<td>c</tr><tr><td>1<td>2<td>3</tr></table><br>
<hr>＜長い url のテスト＞<br>
<a href="http://ja.wikipedia.org/wiki/0.999...%E3%81%8C1%E3%81%AB%E7%AD%89%E3%81%97%E3%81%84%E3%81%93%E3%81%A8%E3%81%AE%E8%A8%BC%E6%98%8E">http://ja.wikipedia.org/wiki/0.999...%E3%81%8C1%E3%81%AB%E7%AD%89%E3<br>
%81%97%E3%81%84%E3%81%93%E3%81%A8%E3%81%AE%E8%A8%BC%E6%98%8E</a><br>
</p><p>
<hr>＜hiki url＞<br>
<a href="http://ftnk.no-ip.com/~fumi/cl/">cl</a><br>
</p><p>
<hr>＜引用のテスト＞<br>
">>" と "<<" による引用<br>
<blockquote>ここから<br>
1<br>
2<br>
ここまで<br>
</blockquote><br>
">" による引用<br>
<blockquote>ここも引用(>)<br>
</blockquote><br>
">" による複数行の引用<br>
<blockquote>ここから<br>
1<br>
2<br>
ここまで<br>
</blockquote><br>
"|" による引用<br>
<blockquote>引用 (|)<br>
</blockquote><br>
<hr>＜文字修飾のテスト＞<br>
取り消し <s>ABC</s><br>
強調 <em>ABC</em><br>
さらに強調 <strong>ABC</strong><br>
</p><p>
<hr>＜rchalow の test 5＞<br>
<pre>./rchalow ChangeLog</pre><p>
<hr>＜rchalow の test 4＞<br>
entry 数を増やす<br>
</p><p>
<hr>＜rchalow の test 3＞：item header の行から始まる場合．<br>
</p><p>
<hr>＜rchalow の test 2＞<br>
<a href="2005-11-05-1.html">[2005-11-05-1]</a> のつづき<br>
<a href="http://ftnk.no-ip.com/~fumi/cl/">http://ftnk.no-ip.com/~fumi/cl/</a><br>
</p><p>
<hr>＜rchalow の test＞<br>
test<br>
「__DATA__」で始まる行があると、それ以降の記述は無視される。タブで始まっても無視される。<br>
</p></div><br>
      
    </p>
    
  </div>
</div>
<!-- end:<TMPL_VAR name=ymdi> -->
<!-- 広告とか -->



<!-- start:2008-03-22-3 -->
<div class="section hentry">
  <div class="entry-title">
    <h3 class="subtitle"><a id="2008-03-22-3" href="2008-03-22-3.html"><span class="sanchor">■</span></a> <span class="clitemheader">kuttuki-rss.rbみたいなもの</span> [<a href="cat_chalow.html">chalow</a>][<a href="cat_e4bfaee8a18c.html">修行</a>]
      <a href="https://b.hatena.ne.jp/entry/https://akapy.github.io/rchalow/2008-03-22-3.html">
        <img src="https://b.hatena.ne.jp/entry/image/https://akapy.github.io/rchalow/2008-03-22-3.html" class="no_border" alt="はてぶ">
      </a>
      <span class="hatesta"><a href="2008-03-22-3.html"></a></span>
    </h3>
  </div>
  
  <div class="entry-tag">tag: [<a href="cat_chalow.html">chalow</a>][<a href="cat_e4bfaee8a18c.html">修行</a>]</div>
  
  <div class="entry-content">
    <p><p>なんか <a href="http://nais.to/~yto/tools/kuttuki-rss/">kuttuki-rss.pl</a> が動いてくれないので、<br>
<a href="http://www.cozmixng.org/~rwiki/?cmd=view;name=RSS+Parser">RSS Parser</a>のsampleを切り貼り。オイにはこの程度で充分だ。<br>
ありがとうございました＞kouさま<br>
<blockquote>#!/usr/bin/env ruby<br>
</p><p>
$LOAD_PATH.unshift("/home/akapy/lib/ruby/rss/lib")<br>
require 'rss'<br>
require 'open-uri'<br>
</p><p>
require "nkf"<br>
class String<br>
&nbsp;&nbsp;# From tdiary.rb<br>
&nbsp;&nbsp;def shorten( len = 120 )<br>
&nbsp;&nbsp;&nbsp;&nbsp;lines = NKF::nkf( "-e -m0 -f#{len}", self.gsub( /\n/, ' ' ) ).split( /\n/ )<br>
&nbsp;&nbsp;&nbsp;&nbsp;lines[0].concat( '...' ) if lines[0] and lines[1]<br>
&nbsp;&nbsp;&nbsp;&nbsp;lines[0]<br>
&nbsp;&nbsp;end<br>
end<br>
</p><p>
def print_items(feed)<br>
&nbsp;&nbsp;puts "document.writeln('&lt;h3>つっこみ一覧&lt;/h3>&lt;div class=\"stdbox\">&lt;p>recent entries&lt;/p>&lt;ul class=\"stdbox\">')"<br>
&nbsp;&nbsp;feed.items.each do |item|<br>
#    puts "document.writeln('&lt;li class=\"RSSitems\"> #{item.title.shorten(50)} : #{item.description.shorten(50)}&lt;/li>')"<br>
&nbsp;&nbsp;&nbsp;&nbsp;puts "document.writeln('&lt;li class=\"stdbox\"> #{item.description.shorten(20)}&lt;/li>')"<br>
&nbsp;&nbsp;end<br>
&nbsp;&nbsp;puts "document.writeln('&lt;/ul>&lt;/div>')"<br>
end<br>
</p><p>
#ARGV.each do |fname|<br>
#  feed = nil<br>
#  begin<br>
#    feed = RSS::Parser.parse(File.read(fname), false)<br>
&nbsp;&nbsp;&nbsp;&nbsp;rss = RSS::Parser.parse(open("http://pub.cozmixng.org/~akapy/ChangeLogMemo/kblog/bbs.rdf").read, false)<br>
&nbsp;&nbsp;&nbsp;&nbsp;rss.output_encoding = "euc-jp"<br>
</p><p>
#  rescue RSS::Error<br>
#  end<br>
</p><p>
&nbsp;&nbsp;if rss.nil?<br>
&nbsp;&nbsp;&nbsp;&nbsp;puts "#{fname}はRSS 0.9x/1.0/2.0, Atom 1.0のいずれでもありません。"<br>
&nbsp;&nbsp;else<br>
&nbsp;&nbsp;&nbsp;&nbsp;print_items(rss)<br>
&nbsp;&nbsp;end<br>
#end<br>
<<<br>
      
    </p>
    
  </div>
</div>
<!-- end:<TMPL_VAR name=ymdi> -->
<!-- ReplaceOnce -->


<!-- start:2008-02-28-2 -->
<div class="section hentry">
  <div class="entry-title">
    <h3 class="subtitle"><a id="2008-02-28-2" href="2008-02-28-2.html"><span class="sanchor">■</span></a> <span class="clitemheader">kuttuki-rss</span> [<a href="cat_chalow.html">chalow</a>]
      <a href="https://b.hatena.ne.jp/entry/https://akapy.github.io/rchalow/2008-02-28-2.html">
        <img src="https://b.hatena.ne.jp/entry/image/https://akapy.github.io/rchalow/2008-02-28-2.html" class="no_border" alt="はてぶ">
      </a>
      <span class="hatesta"><a href="2008-02-28-2.html"></a></span>
    </h3>
  </div>
  
  <div class="entry-tag">tag: [<a href="cat_chalow.html">chalow</a>]</div>
  
  <div class="entry-content">
    <p><p>つっこみのRSSを、サイドバーに表示できるかためしてみた。<br>
kuttuki-rss と miharing を使わせていただきます。<br>
サーバー管理者に XML::RSS、LWP::Simpleをインストールして頂きまして<br>
コマンドラインから試しましたが<br>
<blockquote>[akapy@pub ~]$./kuttuki-rss.pl -n 5 '<a href="http://www.linux.or.jp/index.rdf'">http://www.linux.or.jp/index.rdf'</a> -o test.js<br>
Can't locate object method "items" via package "XML::RSS" at ./kuttuki-rss.pl line 62, &lt;DATA> line 855.<br>
</blockquote>ということで動いてくれません。<br>
う〜ん…。<br>
      
    </p>
    
  </div>
</div>
<!-- end:<TMPL_VAR name=ymdi> -->
<!-- ReplaceOnce -->


<!-- start:2008-02-14-1 -->
<div class="section hentry">
  <div class="entry-title">
    <h3 class="subtitle"><a id="2008-02-14-1" href="2008-02-14-1.html"><span class="sanchor">■</span></a> <span class="clitemheader">cpan> install HTML::Template</span> [<a href="cat_plamo.html">Plamo</a>][<a href="cat_chalow.html">chalow</a>]
      <a href="https://b.hatena.ne.jp/entry/https://akapy.github.io/rchalow/2008-02-14-1.html">
        <img src="https://b.hatena.ne.jp/entry/image/https://akapy.github.io/rchalow/2008-02-14-1.html" class="no_border" alt="はてぶ">
      </a>
      <span class="hatesta"><a href="2008-02-14-1.html"></a></span>
    </h3>
  </div>
  
  <div class="entry-tag">tag: [<a href="cat_plamo.html">Plamo</a>][<a href="cat_chalow.html">chalow</a>]</div>
  
  <div class="entry-content">
    <p><p>昨日のことだが。<br>
ローカルマシンでchalowしようとしたらHTML::Templateが無いと怒られた。<br>
<blockquote>$ sudo perl -MCPAN -e shell<br>
cpan> install Bundle::CPAN<br>
cpan> install HTML::Template<br>
cpan> install Jcode<br>
</blockquote>これでchalowできた。<br>
      
    </p>
    
  </div>
</div>
<!-- end:<TMPL_VAR name=ymdi> -->
<!-- ReplaceOnce -->


<!-- start:2008-02-11-1 -->
<div class="section hentry">
  <div class="entry-title">
    <h3 class="subtitle"><a id="2008-02-11-1" href="2008-02-11-1.html"><span class="sanchor">■</span></a> <span class="clitemheader">nais.toが休み？</span> [<a href="cat_e381b2e381a8e3828ae38194e381a8.html">ひとりごと</a>][<a href="cat_chalow.html">chalow</a>]
      <a href="https://b.hatena.ne.jp/entry/https://akapy.github.io/rchalow/2008-02-11-1.html">
        <img src="https://b.hatena.ne.jp/entry/image/https://akapy.github.io/rchalow/2008-02-11-1.html" class="no_border" alt="はてぶ">
      </a>
      <span class="hatesta"><a href="2008-02-11-1.html"></a></span>
    </h3>
  </div>
  
  <div class="entry-tag">tag: [<a href="cat_e381b2e381a8e3828ae38194e381a8.html">ひとりごと</a>][<a href="cat_chalow.html">chalow</a>]</div>
  
  <div class="entry-content">
    <p><p><a href="http://nais.to/">http://nais.to/</a>  にアクセスできないな。<br>
kuttuki-rssについて調べたいのだが。<br>
</p><p>
レンタルサーバーのトラブルでしたか。<br>
<a href="http://chalow.net/2008-02-11-1.html">http://chalow.net/2008-02-11-1.html</a><br>
      
    </p>
    
  </div>
</div>
<!-- end:<TMPL_VAR name=ymdi> -->
<!-- ReplaceOnce -->


<!-- start:2007-10-20-3 -->
<div class="section hentry">
  <div class="entry-title">
    <h3 class="subtitle"><a id="2007-10-20-3" href="2007-10-20-3.html"><span class="sanchor">■</span></a> <span class="clitemheader">chalow 1.0リリース</span> [<a href="cat_chalow.html">chalow</a>]
      <a href="https://b.hatena.ne.jp/entry/https://akapy.github.io/rchalow/2007-10-20-3.html">
        <img src="https://b.hatena.ne.jp/entry/image/https://akapy.github.io/rchalow/2007-10-20-3.html" class="no_border" alt="はてぶ">
      </a>
      <span class="hatesta"><a href="2007-10-20-3.html"></a></span>
    </h3>
  </div>
  
  <div class="entry-tag">tag: [<a href="cat_chalow.html">chalow</a>]</div>
  
  <div class="entry-content">
    <p><p><a href="http://chalow.net/2007-10-19-2.html">http://chalow.net/2007-10-19-2.html</a><br>
さっそく使ってみる。<br>
</p><p>
たつおさんとこと表示の違いを調査<br>
sample内のファイルをpublic_htmlにコピー<br>
diary.cssを改造<br>
まだ格好悪い表示だけど、こんなもんでいいや。<br>
      
    </p>
    
  </div>
</div>
<!-- end:<TMPL_VAR name=ymdi> -->
<!-- ReplaceOnce -->


<!-- start:2007-06-06-5 -->
<div class="section hentry">
  <div class="entry-title">
    <h3 class="subtitle"><a id="2007-06-06-5" href="2007-06-06-5.html"><span class="sanchor">■</span></a> <span class="clitemheader">このファイルの分割</span> [<a href="cat_chalow.html">chalow</a>]
      <a href="https://b.hatena.ne.jp/entry/https://akapy.github.io/rchalow/2007-06-06-5.html">
        <img src="https://b.hatena.ne.jp/entry/image/https://akapy.github.io/rchalow/2007-06-06-5.html" class="no_border" alt="はてぶ">
      </a>
      <span class="hatesta"><a href="2007-06-06-5.html"></a></span>
    </h3>
  </div>
  
  <div class="entry-tag">tag: [<a href="cat_chalow.html">chalow</a>]</div>
  
  <div class="entry-content">
    <p><p>このChangeLogメモのファイルが１.２Ｍを越えたようで、<br>
エディタでの編集が重くなってきたので分割してみた。<br>
5/31までを旧ファイルとしたけど chalowする前に連結処理しているので<br>
HTML的には今までと変わりないはず。たぶん。<br>
      
    </p>
    
  </div>
</div>
<!-- end:<TMPL_VAR name=ymdi> -->
<!-- ReplaceOnce -->


<!-- start:2007-02-06-2 -->
<div class="section hentry">
  <div class="entry-title">
    <h3 class="subtitle"><a id="2007-02-06-2" href="2007-02-06-2.html"><span class="sanchor">■</span></a> <span class="clitemheader">http://chalow.org/</span> [<a href="cat_chalow.html">chalow</a>]
      <a href="https://b.hatena.ne.jp/entry/https://akapy.github.io/rchalow/2007-02-06-2.html">
        <img src="https://b.hatena.ne.jp/entry/image/https://akapy.github.io/rchalow/2007-02-06-2.html" class="no_border" alt="はてぶ">
      </a>
      <span class="hatesta"><a href="2007-02-06-2.html"></a></span>
    </h3>
  </div>
  
  <div class="entry-tag">tag: [<a href="cat_chalow.html">chalow</a>]</div>
  
  <div class="entry-content">
    <p><p>chalowのサイトが変更になったそうでございます。<br>
      
    </p>
    
  </div>
</div>
<!-- end:<TMPL_VAR name=ymdi> -->
<!-- ReplaceOnce -->


<!-- start:2007-01-06-2 -->
<div class="section hentry">
  <div class="entry-title">
    <h3 class="subtitle"><a id="2007-01-06-2" href="2007-01-06-2.html"><span class="sanchor">■</span></a> <span class="clitemheader">ここの表示</span> [<a href="cat_e381b2e381a8e3828ae38194e381a8.html">ひとりごと</a>][<a href="cat_chalow.html">chalow</a>]
      <a href="https://b.hatena.ne.jp/entry/https://akapy.github.io/rchalow/2007-01-06-2.html">
        <img src="https://b.hatena.ne.jp/entry/image/https://akapy.github.io/rchalow/2007-01-06-2.html" class="no_border" alt="はてぶ">
      </a>
      <span class="hatesta"><a href="2007-01-06-2.html"></a></span>
    </h3>
  </div>
  
  <div class="entry-tag">tag: [<a href="cat_e381b2e381a8e3828ae38194e381a8.html">ひとりごと</a>][<a href="cat_chalow.html">chalow</a>]</div>
  
  <div class="entry-content">
    <p><p>[を]さんちみたいにコメントを各アイテムのところに表示させようかとも<br>
思ったが、これでいいか。シンプルで。<br>
      
    </p>
    
  </div>
</div>
<!-- end:<TMPL_VAR name=ymdi> -->
<!-- ReplaceOnce -->


<!-- start:2006-12-27-1 -->
<div class="section hentry">
  <div class="entry-title">
    <h3 class="subtitle"><a id="2006-12-27-1" href="2006-12-27-1.html"><span class="sanchor">■</span></a> <span class="clitemheader">chalow1.0rc6</span> [<a href="cat_chalow.html">chalow</a>][<a href="cat_e4bfaee8a18c.html">修行</a>]
      <a href="https://b.hatena.ne.jp/entry/https://akapy.github.io/rchalow/2006-12-27-1.html">
        <img src="https://b.hatena.ne.jp/entry/image/https://akapy.github.io/rchalow/2006-12-27-1.html" class="no_border" alt="はてぶ">
      </a>
      <span class="hatesta"><a href="2006-12-27-1.html"></a></span>
    </h3>
  </div>
  
  <div class="entry-tag">tag: [<a href="cat_chalow.html">chalow</a>][<a href="cat_e4bfaee8a18c.html">修行</a>]</div>
  
  <div class="entry-content">
    <p><p>カレントディレクトリに移動すれば ChangeLogReader.pmも使えるのね。<br>
パス通せばいいんだろうな。<br>
というわけでアップグレード。<br>
ついでにkuttukibbsの bbs.rdfを調整。<br>
      
    </p>
    
  </div>
</div>
<!-- end:<TMPL_VAR name=ymdi> -->
<!-- ReplaceOnce -->


<!-- start:2006-11-30-3 -->
<div class="section hentry">
  <div class="entry-title">
    <h3 class="subtitle"><a id="2006-11-30-3" href="2006-11-30-3.html"><span class="sanchor">■</span></a> <span class="clitemheader">cl2moneycsv.rb</span> [<a href="cat_chalow.html">chalow</a>][<a href="cat_e4bfaee8a18c.html">修行</a>]
      <a href="https://b.hatena.ne.jp/entry/https://akapy.github.io/rchalow/2006-11-30-3.html">
        <img src="https://b.hatena.ne.jp/entry/image/https://akapy.github.io/rchalow/2006-11-30-3.html" class="no_border" alt="はてぶ">
      </a>
      <span class="hatesta"><a href="2006-11-30-3.html"></a></span>
    </h3>
  </div>
  
  <div class="entry-tag">tag: [<a href="cat_chalow.html">chalow</a>][<a href="cat_e4bfaee8a18c.html">修行</a>]</div>
  
  <div class="entry-content">
    <p><p>ありがとさんです＞kou<br>
<blockquote><pre>#!/usr/bin/env ruby
$KCODE=&quot;EUC&quot;

def usage
  STDERR.print &lt;&lt;EOF
usage: #{$0} [-m] [files...]
  m: monthly
EOF
  exit 1
end

Opt = {
  'monthly' =&gt; false    # 月毎に計算
}      # Optはハッシュ

while ARGV[0] =~ /^-/
  $_ = ARGV.shift
  Opt['monthly'] = true if ~/m/
  usage if ~/[^-m]/
end

usage if ARGV.size &lt; 1


# 費目 an item of expendidure
lioe = ['外', '食', '交', '遊', '本', '音', '雑', '衣', '他']  # 配列

date =&quot;&quot;
inside_flag = 0
entry = Hash.new
while line = gets
  if /^((\d{4}-\d\d)-\d\d)/ =~ line then  # 日付をキープ
    if Opt['monthly'] == true then
    date = $2      # = year-month
    else
    date = $1
    date = date.tr(&quot;-&quot;,&quot;.&quot;)
    end
  elsif /買物ログ.*:/ =~ line then  # (オリジナルcl2moneycsv.plと条件の違いあり)家計簿データ記述ブロックの始まり
    inside_flag = 1
  elsif inside_flag == 1
    if /^\s*$/ =~ line and inside_flag == 1 then
      inside_flag = 0
    elsif (/^\t(.+?)(\s|\xa1\xa1).*(\s|\xa1\xa1)(\d+)$/) =~ line then
      entry[date] ||= Hash.new(0)
      entry[date][$1] += $4.to_i
    end
  end
end

print &quot; &quot; * 10, &quot;,  &quot;, lioe.join(',  '), &quot;\n&quot;

entry.keys.sort.each do |date|
  print &quot;#{date},&quot;
  puts lioe.collect {|item| &quot;%4d&quot; % entry[date][item]}.join(&quot;,&quot;)
end</pre>
</blockquote><br>
あっしは lioe を任意にしたいので<br>
<blockquote><pre>#!/usr/bin/env ruby
$KCODE=&quot;EUC&quot;

def usage
  STDERR.print &lt;&lt;EOF
usage: #{$0} [-m] [files...]
  m: monthly
EOF
  exit 1
end

Opt = {
  'monthly' =&gt; false    # 月毎に計算
}      # Optはハッシュ

while ARGV[0] =~ /^-/
  $_ = ARGV.shift
  Opt['monthly'] = true if ~/m/
  usage if ~/[^-m]/
end

usage if ARGV.size &lt; 1


# 費目 an item of expendidure
#lioe = ['外', '食', '交', '遊', '本', '音', '雑', '衣', '他']  # 配列
lioe = []

date =&quot;&quot;
inside_flag = 0
entry = Hash.new
while line = gets
  if /^((\d{4}-\d\d)-\d\d)/ =~ line then  # 日付をキープ
    if Opt['monthly'] == true then
    date = $2      # = year-month
    else
    date = $1
    date = date.tr(&quot;-&quot;,&quot;.&quot;)
    end
  elsif /買物ログ.*:/ =~ line then  # 家計簿データ記述ブロックの始まり
    inside_flag = 1
  elsif inside_flag == 1
    if /^\s*$/ =~ line and inside_flag == 1 then
      inside_flag = 0
    elsif (/^\t(.+?)(\s|\xa1\xa1).*(\s|\xa1\xa1)(\d+)$/) =~ line then
yo = line.split(nil)
  kamoku = yo[0]
  naiyou = yo[1]
  kingaku = yo[2]
  sonota = yo[3]

          lioe.push(yo[0])
          lioe.uniq!

      entry[date] ||= Hash.new(0)
      entry[date][$1] += $4.to_i
    end
  end
end

print &quot; &quot; * 10, &quot;,  &quot;, lioe.join(',  '), &quot;\n&quot;

entry.keys.sort.each do |date|
  print &quot;#{date},&quot;
  puts lioe.collect {|item| &quot;%4d&quot; % entry[date][item]}.join(&quot;,&quot;)
end</pre>
</blockquote><br>
      
    </p>
    
  </div>
</div>
<!-- end:<TMPL_VAR name=ymdi> -->
<!-- ReplaceOnce -->


<!-- start:2006-11-14-4 -->
<div class="section hentry">
  <div class="entry-title">
    <h3 class="subtitle"><a id="2006-11-14-4" href="2006-11-14-4.html"><span class="sanchor">■</span></a> <span class="clitemheader">だいぶ前の記述を書き直したら</span> [<a href="cat_chalow.html">chalow</a>][<a href="cat_e4bfaee8a18c.html">修行</a>]
      <a href="https://b.hatena.ne.jp/entry/https://akapy.github.io/rchalow/2006-11-14-4.html">
        <img src="https://b.hatena.ne.jp/entry/image/https://akapy.github.io/rchalow/2006-11-14-4.html" class="no_border" alt="はてぶ">
      </a>
      <span class="hatesta"><a href="2006-11-14-4.html"></a></span>
    </h3>
  </div>
  
  <div class="entry-tag">tag: [<a href="cat_chalow.html">chalow</a>][<a href="cat_e4bfaee8a18c.html">修行</a>]</div>
  
  <div class="entry-content">
    <p><p>./chlm-all.sh を実行すること。<br>
そうしないと食い違いがでます。cronで一定間隔で実行するか。<br>
      
    </p>
    
  </div>
</div>
<!-- end:<TMPL_VAR name=ymdi> -->
<!-- ReplaceOnce -->


<!-- start:2006-08-19-1 -->
<div class="section hentry">
  <div class="entry-title">
    <h3 class="subtitle"><a id="2006-08-19-1" href="2006-08-19-1.html"><span class="sanchor">■</span></a> <span class="clitemheader">くっつきＢＢＳスパム対策</span> [<a href="cat_chalow.html">chalow</a>]
      <a href="https://b.hatena.ne.jp/entry/https://akapy.github.io/rchalow/2006-08-19-1.html">
        <img src="https://b.hatena.ne.jp/entry/image/https://akapy.github.io/rchalow/2006-08-19-1.html" class="no_border" alt="はてぶ">
      </a>
      <span class="hatesta"><a href="2006-08-19-1.html"></a></span>
    </h3>
  </div>
  
  <div class="entry-tag">tag: [<a href="cat_chalow.html">chalow</a>]</div>
  
  <div class="entry-content">
    <p><p><blockquote>### 書き込み<br>
if ($mode eq "write") {<br>
&nbsp;&nbsp;&nbsp;&nbsp;$name = $noname if ($name =~ /^\s*$/sm);<br>
</p><p>
+ ##### スパム対策 2006/08/19<br>
+ ##### <a href="http://www.pochi.cc/~sasaki/chalow/2006-01-25-2.html">http://www.pochi.cc/~sasaki/chalow/2006-01-25-2.html</a><br>
+ # anti spam<br>
+     if (($body ne "") &amp;&amp; ($body !~ m/[\x80-\xff]/)) {die('error')};<br>
+ #####<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;if ($body !~ /\A\s*\Z/m) {<br>
escape_string(\$name);	<br>
escape_string(\$mail_or_url);	<br>
escape_string(\$body);<br>
</p><p>
$body =~ s/\r?\n/&lt;br>/gsm;<br>
</p><p>
my $name_tmp = $name;<br>
if ($mail_or_url =~ /^http:\/\/$URLCHARS+$/) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;$name_tmp = qq(&lt;a href="$mail_or_url">$name&lt;/a>);<br>
}<br>
</p><p>
$latest_id++;<br>
$com_hash{$latest_id}{n} = $name_tmp;<br>
$com_hash{$latest_id}{m} = $body;<br>
$com_hash{$latest_id}{d} = $what_time_is_it_now;<br>
</p><p>
+ ##### スパム対策 2006/08/19<br>
+ exit if (length($body) > 1000); # spam<br>
+ #####	<br>
</p><p>
write_to_logfile();	# ログファイルへの書き込み<br>
write_to_jsfile($fn_pref.".js"); # JavaScript Feed ファイルへの書き込み<br>
write_to_rssfile(); # RSS ファイルへの書き込み<br>
write_to_adminlogfile(); # 管理者用ログファイルへの書き込み<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
}<br>
</blockquote><br>
      
    </p>
    
  </div>
</div>
<!-- end:<TMPL_VAR name=ymdi> -->
<!-- ReplaceOnce -->


<!-- start:2006-06-06-1 -->
<div class="section hentry">
  <div class="entry-title">
    <h3 class="subtitle"><a id="2006-06-06-1" href="2006-06-06-1.html"><span class="sanchor">■</span></a> <span class="clitemheader">kuttukibbsの表示変更</span> [<a href="cat_chalow.html">chalow</a>]
      <a href="https://b.hatena.ne.jp/entry/https://akapy.github.io/rchalow/2006-06-06-1.html">
        <img src="https://b.hatena.ne.jp/entry/image/https://akapy.github.io/rchalow/2006-06-06-1.html" class="no_border" alt="はてぶ">
      </a>
      <span class="hatesta"><a href="2006-06-06-1.html"></a></span>
    </h3>
  </div>
  
  <div class="entry-tag">tag: [<a href="cat_chalow.html">chalow</a>]</div>
  
  <div class="entry-content">
    <p><p>夜中にいろいろやってみた。<br>
cl.conf の kuttukibbsという単語の付近を編集すると変わるみたい。<br>
いじった形跡があるから設置した時も編集したんだな。全然覚えていない(泣<br>
      
    </p>
    
  </div>
</div>
<!-- end:<TMPL_VAR name=ymdi> -->
<!-- ReplaceOnce -->


<!-- start:2006-05-28-1 -->
<div class="section hentry">
  <div class="entry-title">
    <h3 class="subtitle"><a id="2006-05-28-1" href="2006-05-28-1.html"><span class="sanchor">■</span></a> <span class="clitemheader">amazonプラグインを使ってみる</span> [<a href="cat_chalow.html">chalow</a>][<a href="cat_e69cac.html">本</a>]
      <a href="https://b.hatena.ne.jp/entry/https://akapy.github.io/rchalow/2006-05-28-1.html">
        <img src="https://b.hatena.ne.jp/entry/image/https://akapy.github.io/rchalow/2006-05-28-1.html" class="no_border" alt="はてぶ">
      </a>
      <span class="hatesta"><a href="2006-05-28-1.html"></a></span>
    </h3>
  </div>
  
  <div class="entry-tag">tag: [<a href="cat_chalow.html">chalow</a>][<a href="cat_e69cac.html">本</a>]</div>
  
  <div class="entry-content">
    <p><p>ASINとはアマゾン独自の商品管理IDらしい。<br>
<pre>{{amazon('4088646207','アルコール２／西村しのぶ')}}amazonプラグイン
{{amazon_link('4088646207','akapy-22','アルコール２')}}amazon_linkプラグイン
{{amazon_search('アルコール２')}}amazon_searchプラグイン
{{qualmish_amazon_link('4088646207','akapy-22','アルコール２')}}qualmish_amazon_linkプラグイン</pre>
<a href="http://www.amazon.co.jp/exec/obidos/ASIN/4088646207/ftnk1221-22/ref=nosim"><img src="http://images-jp.amazon.com/images/P/4088646207.09.MZZZZZZZ.jpg" alt=""></a><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4088646207/ftnk1221-22/ref=nosim">アルコール２／西村しのぶ</a>amazon_imgプラグイン<br>
<pre>{{asin('4088646207')}}asinプラグイン
{{asin_heavy('4088646207')}}asin_heavyプラグイン</pre><p>
プラグイン紹介一覧が欲しいな。<br>
      
    </p>
    
  </div>
</div>
<!-- end:<TMPL_VAR name=ymdi> -->
<!-- ReplaceOnce -->


<!-- start:2006-02-15-3 -->
<div class="section hentry">
  <div class="entry-title">
    <h3 class="subtitle"><a id="2006-02-15-3" href="2006-02-15-3.html"><span class="sanchor">■</span></a> <span class="clitemheader">cl2kaimono-itiran-csv.rb</span> [<a href="cat_rubye381aee58b89e5bcb7.html">rubyの勉強</a>][<a href="cat_chalow.html">chalow</a>]
      <a href="https://b.hatena.ne.jp/entry/https://akapy.github.io/rchalow/2006-02-15-3.html">
        <img src="https://b.hatena.ne.jp/entry/image/https://akapy.github.io/rchalow/2006-02-15-3.html" class="no_border" alt="はてぶ">
      </a>
      <span class="hatesta"><a href="2006-02-15-3.html"></a></span>
    </h3>
  </div>
  
  <div class="entry-tag">tag: [<a href="cat_rubye381aee58b89e5bcb7.html">rubyの勉強</a>][<a href="cat_chalow.html">chalow</a>]</div>
  
  <div class="entry-content">
    <p><p>cl2moneycsv.plを改造して[買物ログ]部分だけをcsv化できた。<br>
これで確定申告に間に合いそうだ。<br>
<blockquote>svn add cl2kaimono-itiran-csv.rb  しておいた(笑)<br>
</blockquote>最後は表計算ソフトが必要なんだけどOpenOffice.orgは重過ぎるしな。印刷もしたいし。<br>
Winの１２３かな。<br>
<strong>Linuxな表計算ソフトと、印刷は今後の課題としよう。</strong><br>
      
    </p>
    
  </div>
</div>
<!-- end:<TMPL_VAR name=ymdi> -->
<!-- ReplaceOnce -->


<!-- start:2006-01-19-2 -->
<div class="section hentry">
  <div class="entry-title">
    <h3 class="subtitle"><a id="2006-01-19-2" href="2006-01-19-2.html"><span class="sanchor">■</span></a> <span class="clitemheader">cl2kaimonocsv.rb</span> [<a href="cat_e4bfaee8a18c.html">修行</a>][<a href="cat_rubye381aee58b89e5bcb7.html">rubyの勉強</a>][<a href="cat_chalow.html">chalow</a>]
      <a href="https://b.hatena.ne.jp/entry/https://akapy.github.io/rchalow/2006-01-19-2.html">
        <img src="https://b.hatena.ne.jp/entry/image/https://akapy.github.io/rchalow/2006-01-19-2.html" class="no_border" alt="はてぶ">
      </a>
      <span class="hatesta"><a href="2006-01-19-2.html"></a></span>
    </h3>
  </div>
  
  <div class="entry-tag">tag: [<a href="cat_e4bfaee8a18c.html">修行</a>][<a href="cat_rubye381aee58b89e5bcb7.html">rubyの勉強</a>][<a href="cat_chalow.html">chalow</a>]</div>
  
  <div class="entry-content">
    <p><p><blockquote>[src]<br>
#!/usr/bin/env ruby<br>
$KCODE="EUC"<br>
#<br>
##!/usr/bin/env perl<br>
# $Id: ChangeLog 1250 2007-06-05 14:58:37Z akapy $<br>
# ChangeLog メモで家計簿!<br>
#  ref. &lt;<a href="http://nais.to/~yto/doc/zb/0016.html#kakeibo">http://nais.to/~yto/doc/zb/0016.html#kakeibo</a>><br>
#<br>
# ■フォーマット<br>
#買a物ログ:<br>
# ^\t[費目][スペース][コメント][金額]$<br>
# - スペースは半角でも全角でも良い。<br>
# - 金額は半角数字。桁カンマは入れてはいけない。<br>
#<br>
# ■注意<br>
# - 日本語コードは EUC を仮定<br>
# - Excel に読み込ませる前に文字コードを Shift-JIS に変換する必要あり<br>
#<br>
# ■記述例＆実行例<br>
# <br>
# $ cat ChangeLog<br>
# 2003-08-02  YAMASHITA Tatsuo  &lt;yto@example.com><br>
# <br>
# 	* できごと: だらだらしてた。<br>
# <br>
# 	* p:買a物ログ: <br>
# 	食 スーパー 1050<br>
# 	本 コンビニで雑誌 380<br>
# <br>
# 2003-08-01  YAMASHITA Tatsuo  &lt;yto@example.com><br>
# <br>
# 	* できごと: 川崎で映画。<br>
# <br>
# 	* p:買a物ログ: <br>
# 	外 ファーストフード 525<br>
# 	遊 映画 2000<br>
# 	交 川崎往復 420<br>
# 	食 スーパー 780<br>
# <br>
# 2003-07-31  YAMASHITA Tatsuo  &lt;yto@example.com><br>
# <br>
# 	* できごと: 渋谷に出掛けた。<br>
# <br>
# 	* p:買a物ログ: <br>
# 	外 レストラン 3000<br>
# 	交 渋谷往復 640<br>
# 	雑 ペンとメモ帳 550<br>
# <br>
# $ cl2moneycsv.pl ChangeLog<br>
#           ,  外,  食,  交,  遊,  本,  音,  雑,  衣,  他<br>
# 2003.07.31,3000,   0, 640,   0,   0,   0, 550,   0,   0<br>
# 2003.08.01, 525, 780, 420,2000,   0,   0,   0,   0,   0<br>
# 2003.08.02,   0,1050,   0,   0, 380,   0,   0,   0,   0<br>
# $ cl2moneycsv.pl -m ChangeLog  (←月毎に集計)<br>
#           ,  外,  食,  交,  遊,  本,  音,  雑,  衣,  他<br>
# 2003-07,3000,   0, 640,   0,   0,   0, 550,   0,   0<br>
# 2003-08, 525,1830, 420,2000, 380,   0,   0,   0,   0<br>
# $ cl2moneycsv.pl -m ChangeLog | nkf -s > kaimono.csv<br>
</p><p>
# use strict;<br>
</p><p>
</p><p>
# 費目 an item of expendidure<br>
#my @lioe = ('外', '食', '交', '遊', '本', '音', '雑', '衣', '他')<br>
lioe = ["外","食","交","遊","本","音","雑","衣","他"]<br>
#lioe = %w(外 食 交 )<br>
</p><p>
inside_flag = 0<br>
</p><p>
entry = {}<br>
p lioe<br>
</p><p>
</p><p>
#while (<>) {<br>
#while <><br>
while line = ARGF.gets<br>
&nbsp;&nbsp;&nbsp;&nbsp;if /^((\d{4}-\d\d)-\d\d)/ =~ line then  # 日付をキープ<br>
&nbsp;&nbsp;&nbsp;&nbsp;date = $1		# = year-month-day<br>
#	    $date =~ s|-|.|g	# for Excel<br>
#            p date<br>
&nbsp;&nbsp;&nbsp;&nbsp;elsif /買a物ログ:/ =~ line then	# 家計簿データ記述ブロックの始まり<br>
inside_flag = 1<br>
&nbsp;&nbsp;&nbsp;&nbsp;elsif inside_flag == 1 then   # ブロック内<br>
if /^\s*$/ =~ line and inside_flag == 1 then  # ブロックの終わり<br>
&nbsp;&nbsp;&nbsp;&nbsp;inside_flag = 0<br>
else	#  /^\t(.+?)(\s|\xa1\xa1).*(\s|\xa1\xa1)(\d+)$/<br>
&nbsp;&nbsp;kamoku = $1<br>
&nbsp;&nbsp;naiyou = $2<br>
&nbsp;&nbsp;kingaku = $3<br>
&nbsp;&nbsp;p date,line.chomp.split(nil)<br>
#	  p date,kamoku,naiyou,kingaku<br>
&nbsp;&nbsp;# $1,$2,$3,$4,$5<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br>
&nbsp;&nbsp;&nbsp;&nbsp;end<br>
end<br>
</p><p>
=begin<br>
85,89,92<br>
#print " " x 10, ",  ", join(',  ', @lioe), "\n"<br>
p " " x 10, ",  ", join(',  ', lioe), "\n"<br>
</p><p>
#foreach date (sort keys entry) {<br>
#    print "$date,"<br>
#    print join(',', map {sprintf "%4d", $entry{$date}{$_}} @lioe), "\n"<br>
#}<br>
date.times<br>
&nbsp;&nbsp;&nbsp;p date ;<br>
end<br>
</p><p>
=end<br>
[src]<br>
<<<br>
      
    </p>
    
  </div>
</div>
<!-- end:<TMPL_VAR name=ymdi> -->
<!-- ReplaceOnce -->


<!-- start:2005-05-10-2 -->
<div class="section hentry">
  <div class="entry-title">
    <h3 class="subtitle"><a id="2005-05-10-2" href="2005-05-10-2.html"><span class="sanchor">■</span></a> <span class="clitemheader">add chalow</span> [<a href="cat_chalow.html">chalow</a>]
      <a href="https://b.hatena.ne.jp/entry/https://akapy.github.io/rchalow/2005-05-10-2.html">
        <img src="https://b.hatena.ne.jp/entry/image/https://akapy.github.io/rchalow/2005-05-10-2.html" class="no_border" alt="はてぶ">
      </a>
      <span class="hatesta"><a href="2005-05-10-2.html"></a></span>
    </h3>
  </div>
  
  <div class="entry-tag">tag: [<a href="cat_chalow.html">chalow</a>]</div>
  
  <div class="entry-content">
    <p><p>ちょっとだけchalowの改造をしてみようかと思い、リポジトリにaddしてみた。<br>
RSSのところを変更したいんだけど、さて。。<br>
&nbsp;&nbsp;<a href="http://ukai.jp/Articles/2003/uu-svn/">http://ukai.jp/Articles/2003/uu-svn/</a><br>
      
    </p>
    
  </div>
</div>
<!-- end:<TMPL_VAR name=ymdi> -->
<!-- ReplaceOnce -->


<!-- start:2004-12-03-3 -->
<div class="section hentry">
  <div class="entry-title">
    <h3 class="subtitle"><a id="2004-12-03-3" href="2004-12-03-3.html"><span class="sanchor">■</span></a> <span class="clitemheader">練習 ChangeLogの特殊な記法</span> [<a href="cat_chalow.html">chalow</a>]
      <a href="https://b.hatena.ne.jp/entry/https://akapy.github.io/rchalow/2004-12-03-3.html">
        <img src="https://b.hatena.ne.jp/entry/image/https://akapy.github.io/rchalow/2004-12-03-3.html" class="no_border" alt="はてぶ">
      </a>
      <span class="hatesta"><a href="2004-12-03-3.html"></a></span>
    </h3>
  </div>
  
  <div class="entry-tag">tag: [<a href="cat_chalow.html">chalow</a>]</div>
  
  <div class="entry-content">
    <p><p><hr><br>
＜日付で参照リンク＞<br>
<blockquote><pre>先日[2004-12-01]、どこかへ行った。</pre>
</blockquote>先日<a href="2004-12-01.html">[2004-12-01]</a>、どこかへ行った。<br>
</p><p>
<hr><br>
＜任意のURLへのリンク＞<br>
単語|URL  を 2 つの半角カギカッコで囲むとを任意の URL へのリンクになります。<br>
例： <br>
<blockquote><pre>[[Yahoo!へのリンク|http://www.yahoo.co.jp/]]</pre>
</blockquote><a href="http://www.yahoo.co.jp/">Yahoo!へのリンク</a><br>
</p><p>
&nbsp;&nbsp;長い URL は、バックスラッシュ('\')で途中改行することができる。下記のように変換される。<br>
<blockquote><pre>http://example.com/123456789012345678901234567890\
123456789012345678901234567890.html</pre>
</blockquote><br>
<a href="http://example.com/123456789012345678901234567890123456789012345678901234567890.html">http://example.com/123456789012345678901234567890<br>
123456789012345678901234567890.html</a><br>
</p><p>
<hr><br>
＜イメージへのリンク＞<br>
<blockquote><pre>[[ハッスルぷろじぇくと写真|http://pub.cozmixng.org/~akapy/linux/hsl.jpg]]</pre>
</blockquote>と書けば、<br>
<a href="ハッスルぷろじぇくと写真"><img src="http://pub.cozmixng.org/~akapy/linux/hsl.jpg" alt="画像"></a><br>
<hr><br>
<blockquote><pre>[[すらっしゅどっとjp|http://slashdot.jp/images/banner/slash_hsgw.gif]]</pre>
</blockquote>と書けば、<br>
<a href="すらっしゅどっとjp"><img src="http://slashdot.jp/images/banner/slash_hsgw.gif" alt="画像"></a><br>
<hr><br>
<blockquote><pre>[[http://pub.cozmixng.org/~akapy/linux/hsl.jpg|ハッスルぷろじぇくと写真]]</pre>
</blockquote>と書けば、<br>
<a href="ハッスルぷろじぇくと写真"><img src="http://pub.cozmixng.org/~akapy/linux/hsl.jpg" alt="画像"></a><br>
<hr><br>
<blockquote><pre>[[http://slashdot.jp/images/banner/slash_hsgw.gif|すらっしゅどっとjp]]</pre>
</blockquote>と書けば、<br>
<a href="すらっしゅどっとjp"><img src="http://slashdot.jp/images/banner/slash_hsgw.gif" alt="画像"></a><br>
<hr><br>
<blockquote><pre>[[http://slashdot.jp/images/banner/slash_hsgw.gif|http://slashdot.jp/]]</pre>
</blockquote>と書けば、<br>
<a href="http://slashdot.jp/"><img src="http://slashdot.jp/images/banner/slash_hsgw.gif" alt="画像"></a><br>
</p><p>
<hr><br>
＜ 引用 (citation)＞<br>
タブの後に "|" か ">" が来る行は引用とみなし、blockquote で囲まれる。<br>
</p><p>
&nbsp;&nbsp;&nbsp;または、">>" と "<<" で囲まれた領域が blockquote で囲まれる。<br>
<blockquote>引用<br>
引用<br>
引用<br>
</blockquote><br>
<hr><br>
＜文字修飾の記法＞<br>
</p><p>
&nbsp;&nbsp;「'」2個ではさんだ部分は強調されます。「'」3個ではさんだ部分はさら<br>
&nbsp;&nbsp;&nbsp;&nbsp;に強調されます。「=」2個ではさんだ部分は取消線になります。<br>
</p><p>
<blockquote><pre>      例： ==ABC==  ''ABC''  '''ABC'''</pre>
</blockquote>      例： <s>ABC</s>  <em>ABC</em>  <strong>ABC</strong><br>
</p><p>
<hr><br>
＜表(table)の記法＞<br>
<table><tr><td>項目a<td>項目b<td>項目c</tr><tr><td>項目d<td>項目e<td>項目f</tr></table>>><br>
<pre>||項目a||項目b||項目c
||項目d||項目e||項目f</pre>
</blockquote><br>
<hr><br>
＜プラグイン機能＞<br>
<blockquote><pre>「{{」と「}}」で囲むとプラグイン (関数) を呼び出すことができます。
      例: {{google_seach('海老名 映画館')}}</pre>
</blockquote>プラグインは cl.conf に足して置けば使えます。<br>
</p><p>
<hr><br>
＜エスケープ＞<br>
以下の記法でHTMLを じか書きすることができます。<br>
, , <br>
</p><p>
<hr><br>
＜ソース＞<br>
ソースの表示は  を使います。<br>
内部ではエンティティ置換とpre囲みを行います。<br>
<hr><br>
</p><p>
＜日々のメッセージ埋め込み＞なんてこともできます。<br>
      
    </p>
    
  </div>
</div>
<!-- end:<TMPL_VAR name=ymdi> -->
<!-- ReplaceOnce -->


<!---->
</div>
<div>
最終更新時間: 2021-02-26 07:11

</div></div></body></html>
